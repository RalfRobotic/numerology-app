<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DIAGNOSTIC</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; padding: 10px; word-break: break-all; }
        .box { border: 1px solid #0f0; padding: 10px; margin-bottom: 10px; }
        h3 { margin-top: 0; color: #fff; }
        .fail { color: red; border-color: red; }
        .ok { color: #0f0; }
    </style>
</head>
<body>
    <h2>üïµÔ∏è –î–ï–¢–ï–ö–¢–û–† –ü–†–û–ë–õ–ï–ú–´</h2>
    
    <div class="box" id="url-box">
        <h3>1. –ê–¥—Ä–µ—Å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:</h3>
        <div id="url-val">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <div class="box" id="hash-box">
        <h3>2. –•–≤–æ—Å—Ç –¥–∞–Ω–Ω—ã—Ö (Hash):</h3>
        <div id="hash-val">...</div>
    </div>

    <div class="box" id="init-box">
        <h3>3. InitData (TG SDK):</h3>
        <div id="init-val">...</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // 1. –í—ã–≤–æ–¥–∏–º —Ç–µ–∫—É—â–∏–π URL
        const currentUrl = window.location.href;
        document.getElementById('url-val').innerText = currentUrl;

        // 2. –í—ã–≤–æ–¥–∏–º –•–µ—à (—Ç–∞–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–∞–Ω–Ω—ã–µ)
        const hash = window.location.hash;
        const hashEl = document.getElementById('hash-val');
        hashEl.innerText = hash ? hash : "–ü–£–°–¢–û (–î–ê–ù–ù–´–ï –ü–û–¢–ï–†–Ø–ù–´)";
        
        if (!hash) {
            hashEl.className = "fail";
            hashEl.innerHTML += "<br><br>‚ö†Ô∏è <b>–î–ò–ê–ì–ù–û–ó:</b><br>–ü—Ä–æ–∏–∑–æ—à–µ–ª —Ä–µ–¥–∏—Ä–µ–∫—Ç! –í—ã —É–∫–∞–∑–∞–ª–∏ –≤ –±–æ—Ç–µ –æ–¥–Ω—É —Å—Å—ã–ª–∫—É, –Ω–æ GitHub –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏–ª –Ω–∞ –¥—Ä—É–≥—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä http->https –∏–ª–∏ –¥–æ–±–∞–≤–∏–ª/—É–±—Ä–∞–ª —Å–ª—ç—à). –ü—Ä–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–µ Telegram –¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è.";
        }

        // 3. –í—ã–≤–æ–¥–∏–º InitData
        const initD = tg.initData;
        const initEl = document.getElementById('init-val');
        initEl.innerText = initD ? "–î–ª–∏–Ω–∞: " + initD.length : "–ü–£–°–¢–û (0)";
        
        if (!initD) initEl.className = "fail";

    </script>
</body>
</html>
